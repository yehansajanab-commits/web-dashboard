<!DOCTYPE html>
<html>
<head>
  <title>Alarm Control Dashboard</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

  <style>
    body { background:#0f111a; color:#fff; font-family:Arial; text-align:center }
    .box { border:1px solid #333; border-radius:10px; padding:20px; margin:15px }
    button { padding:10px 20px; margin:5px; font-size:16px; cursor:pointer }
    h2 { margin-bottom:10px }
  </style>
</head>

<body>
<h1>üö® Alarm Control Dashboard</h1>

<div id="devices"></div>

<script>
const broker = 'wss://test.mosquitto.org:8081/mqtt';
const client = mqtt.connect(broker);

const alarms = [
  { id: 1, name: "Alarm 1" },
  { id: 2, name: "Alarm 2" },
  { id: 3, name: "Alarm 3" },
  { id: 4, name: "Alarm 4" }
];

client.on('connect', () => {
  console.log("MQTT connected");
});

function send(alarmId, msg){
  const topic = `speakers/${alarmId}/cmd`;
  client.publish(topic, msg);
  console.log(topic, msg);
}

const root = document.getElementById('devices');

alarms.forEach(a=>{
  const d = document.createElement('div');
  d.className = 'box';
  d.innerHTML = `
    <h2>${a.name}</h2>
    <button onclick="send(${a.id}, 'PLAY')">‚ñ∂ PLAY</button>
    <button onclick="send(${a.id}, 'STOP')">‚èπ STOP</button>
  `;
  root.appendChild(d);
});
</script>

</body>
</html>
